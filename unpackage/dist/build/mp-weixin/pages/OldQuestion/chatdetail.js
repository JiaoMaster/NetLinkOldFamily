(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/OldQuestion/chatdetail"],{"0d57":function(t,e,o){"use strict";o.r(e);var n=o("d99a"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},2716:function(t,e,o){"use strict";o.r(e);var n=o("ec16"),i=o("0d57");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("719a");var c,u=o("f0c5"),r=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);e["default"]=r.exports},"499d":function(t,e,o){},"719a":function(t,e,o){"use strict";var n=o("499d"),i=o.n(n);i.a},7876:function(t,e,o){"use strict";(function(t){o("58fa");n(o("66fd"));var e=n(o("2716"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=o,t(e.default)}).call(this,o("543d")["createPage"])},d99a:function(t,e,o){"use strict";(function(t){function o(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;t.getRecorderManager();var a=t.createInnerAudioContext();a.autoplay=!0;var c={data:function(){return{title:"社交",Ttitle:"",context:"1hello",chatdetail:{},mycom:"",commits:{},token:"",id:"",success:{type:"success",title:"发表成功",message:"发表成功",iconUrl:"https://cdn.uviewui.com/uview/demo/toast/success.png"},warn:{type:"error",icon:!1,title:"发表失败",message:"发表失败,未登录",iconUrl:"https://cdn.uviewui.com/uview/demo/toast/error.png"},audiopath:""}},onPullDownRefresh:function(){t.stopPullDownRefresh()},components:{},onShow:function(){},onUnload:function(){var e=this;""!=e.audiopath&&t.removeSavedFile({filePath:e.audiopath,success:function(t){console.log("ok"),console.log(t)},fail:function(t){console.log("fail"),console.log(t)}})},watch:{chatdetail:function(t,e){}},onLoad:function(e){var o=this;this.id=e.id,console.log(this.id),t.getStorage({key:"token",success:function(t){o.token=t.data}}),t.request({url:"https://link.netlinkold.cn/api/question/get_question_detail/"+o.id,method:"post",header:{Authorization:"Bearer "+o.token},success:function(e){console.log(e.data.question_info),o.chatdetail=e.data.question_info,o.chatdetail.create_time=o.timestampToTime(o.chatdetail.create_time),""==o.chatdetail.title&&(console.log(o.chatdetail),console.log(o.chatdetail.audio_path),t.downloadFile({url:"https://link.netlinkold.cn/down?url="+o.chatdetail.audio_path,success:function(t){o.audiopath=t.tempFilePath,console.log(o.audiopath)}}))},fail:function(t){console.log(t)}}),t.request({url:"https://link.netlinkold.cn/api/commit/get_commit/"+o.id,method:"post",data:{},header:{},success:function(t){o.commits=t.data.data,console.log(t)}})},methods:{tocommit:function(e,o,n,i){t.setStorage({key:"comcon",data:o}),t.setStorage({key:"comuser",data:n}),t.setStorage({key:"comtime",data:i}),t.navigateTo({url:"./commit?id="+e,animationType:"pop-in",animationDuration:200,fail:function(t){console.log(t)}})},playVoice:function(){console.log("播放录音"),this.audiopath&&(a.src=this.audiopath,a.play())},stopVoice:function(){console.log("暂停播放录音"),a.src=this.audiopath,a.pause()},er:function(t){console.log(t)},timestampToTime:function(t){return t=t.replace("T"," "),t=t.replace("Z"," "),t},get_token:function(){t.getStorage({key:"token",success:function(t){this.token=t.data}})},scrolltolower:function(){this.loadmore()},sendcommit:function(){var e=this;if(t.getStorage({key:"token",success:function(t){e.token=t.data}}),""!=e.mycom)return""==e.token?(e.$refs.uToast.show(n({},e.warn)),void t.navigateTo({url:"../user/login"})):void t.request({url:"https://link.netlinkold.cn/api/commit/send_commit",method:"post",data:{post_id:e.id,content:e.mycom,to_user:e.chatdetail.username},header:{Authorization:"Bearer "+e.token},success:function(o){e.mycom="",t.request({url:"https://link.netlinkold.cn/api/commit/get_commit/"+e.id,method:"post",data:{},header:{},success:function(t){e.commits=t.data.data}}),e.$refs.uToast.show(n({},e.success))}})}}};e.default=c}).call(this,o("543d")["default"])},ec16:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}));var n={uToast:function(){return o.e("uni_modules/uview-ui/components/u-toast/u-toast").then(o.bind(null,"72e5"))},uText:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-text/u-text")]).then(o.bind(null,"5ecc"))}},i=function(){var t=this,e=t.$createElement;t._self._c},a=[]}},[["7876","common/runtime","common/vendor"]]]);